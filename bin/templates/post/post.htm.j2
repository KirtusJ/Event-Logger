{% extends 'layout/default.htm.j2' -%}

{% block title -%}
	{% if room-%}
		{% if post -%}
			{{ post['title'] }} : {{ room['name'] }}
		{% else -%}
			Post not found
		{% endif -%}
	{% else -%}
		Room not found
	{% endif -%}
{% endblock -%}

{% block content -%}
	{% if room -%}
		<p><a href="/r/{{ room['name'] }}">{{ room['name'] }}</a></p>
		<p>{{ room['description'] }}</p>
		{% if post -%}
			<div class="post">
				<h3 class="title">{{ post['title'] }}</h3>
				<p class="body">{{ post['body'] }}</p>
				<p class="created">{{ post['created'] }}</p>
				<span><a href="/r/{{ post['room_name'] }}/comments/{{ post['id'] }}">comments</a> <a href="/u/{{ post['author_username'] }}">author</a></span>
				<span><a href="/r/{{ post['room_name'] }}">room</a></span>
				{% if g.user.username == post['author_username'] -%}
					<span><a href="/post/{{ post['id'] }}/edit">edit</a> <a href="/post/{{ post['id'] }}/delete">delete</a></span>
				{% endif -%}
			</div>
			{% if g.user -%}
				<form class="commentform" action="#" method="POST">
					<input type="hidden" name="comment" value="create">
					<input type="text" name="body" style="width: 400px; margin-bottom: 10px" placeholder="Write your comment here...">
					<br>
					<input type="submit" name="Submit">
				</form>
			{% endif -%}
			<div class="comments">
				<p>No comments</p>
			</div>
		{% else -%}
			<p>Post not found</p>
		{% endif -%}
	{% else -%}
		<p>Room not found</p>
	{% endif -%}
{% endblock -%}
